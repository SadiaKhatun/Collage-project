"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1005],{1005:function(e,n,t){t.d(n,{r:function(){return D}});var s=t(47568),i=t(10253),r=t(70655),a=t(67294),o=t(39224),c=t(27407),u=t(75379),l=t(44512),d=t(55210),p=t(85893),f=t(26042),m=t(99534),g=t(5152),v=t.n(g),_=t(9439),h=v()((function(){return Promise.all([t.e(39293),t.e(42706),t.e(44309),t.e(65702),t.e(85123)]).then(t.bind(t,59695)).then((function(e){return e.CompLicensingDialog}))}),{loadableGenerated:{webpack:function(){return[59695]}},ssr:!1}),S=function(e){var n=e.isOpen,t=(0,m.Z)(e,["isOpen"]);return(0,_.B)(n)&&(0,p.jsx)(h,(0,f.Z)({isOpen:n},t))},b=v()((function(){return Promise.all([t.e(39293),t.e(85694),t.e(41664),t.e(33802),t.e(30077),t.e(44727),t.e(18055),t.e(33338)]).then(t.bind(t,48034)).then((function(e){return e.CompLicensingDrawer}))}),{loadableGenerated:{webpack:function(){return[48034]}},ssr:!1}),C=function(e){var n=e.isOpen,t=(0,m.Z)(e,["isOpen"]);return(0,_.B)(n)&&(0,p.jsx)(b,(0,f.Z)({isOpen:n},t))},w=v()((function(){return t.e(39701).then(t.bind(t,39701)).then((function(e){return e.CompLicensingSnackbar}))}),{loadableGenerated:{webpack:function(){return[39701]}},ssr:!1}),z=function(e){var n=e.isOpen,t=(0,m.Z)(e,["isOpen"]);return(0,_.B)(n)&&(0,p.jsx)(w,(0,f.Z)({isOpen:n},t))},Z=t(39290),L=t(64864),O=t(96360),k=function(e){var n=e.assets,t=e.compLicensingHandler,s=e.isDialogOpen,i=e.isDrawerOpen,r=e.isLicensing,a=e.isSnackBarOpen,o=e.licensingError,c=e.onDialogClose,u=e.onDrawerClose,l=e.onSnackbarClose,d=e.selectedAssetSize,f=e.setSelectedAssetSize,m=e.settingsData,g=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).licensingError,n=void 0===e?{}:e,t=(0,Z.$G)(O.clK).t;return{cancel:t("common:actions_cancel"),downloadComp:t("common:actions_download_comp"),enterpriseCompLicense:t("ent:license_enterprise_comp"),genericErrorMessage:t("ent:license_now_error_message"),licensingError:(0,L.j2)({error:n,t:t}),licenseSuccess:t("ent:confirmation_alert_message"),licenseFormLabels:{buttonLabel:t("common:actions_download_comp"),disclaimer:(0,p.jsx)(Z.cC,{i18nKey:"ent:comp_disclaimer",ns:O.clK,components:{bold:(0,p.jsx)("strong",{})}}),addMetadataToAsset:t("ent:add_metadata_to_asset_comp"),metadataFound:t("ent:previous_metadata_found_comp"),metadataMissing:t("ent:previous_metadata_missing_comp"),title:t("ent:add_metadata_to_comp")}}}({licensingError:o});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(S,{assets:n,isOpen:s,onClose:c,onLicense:t,labels:g,isLicensing:r,selectedAssetSize:d,setSelectedAssetSize:f,settingsData:m}),(0,p.jsx)(C,{assets:n,isLicensing:r,isOpen:i,labels:g,onClose:u,onLicense:t}),(0,p.jsx)(z,{isOpen:a,message:g.licensingError,onClose:l})]})};k.defaultProps={assets:null,isDialogOpen:!1,isDrawerOpen:!1,isLicensing:!1,isSnackBarOpen:!1,licensingError:{},selectedAssetSize:"",settingsData:{}};var y=t(45206),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.allowMetadata,t=void 0===n||n,p=(0,i.Z)((0,a.useState)(null),2),f=p[0],m=p[1],g=(0,i.Z)((0,a.useState)(""),2),v=g[0],_=g[1],h=(0,i.Z)((0,a.useState)(""),2),S=h[0],b=h[1],C=(0,i.Z)((0,a.useState)(!1),2),w=C[0],z=C[1],Z=(0,i.Z)((0,a.useState)(!1),2),L=Z[0],O=Z[1],D=(0,i.Z)((0,a.useState)(!1),2),j=D[0],A=D[1],F=(0,u.Z)(),x=F.isLicensing,U=F.licensingError,I=F.licensingStatus,E=F.setLicensingStatus,P=F.licensingAssetsHandler,T=(0,c.U)(),q=(0,d.B)(),B=q.data,M=(0,l.h)(B),G=(0,a.useCallback)(function(){var e=(0,s.Z)((function(e){var n,t,s,i,a,o,c,u,l,d,p,f;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:n=e.assets,t=void 0===n?[]:n,s=e.assetSize,i=e.metadata,a=e.pageSection,o=e.listId,_(t[0].id),c=!1,r.label=1;case 1:return r.trys.push([1,6,,7]),[4,(0,y.qP)({assets:t,assetSize:s,metadata:i,selectedAssetSize:S})];case 2:return u=r.sent(),[4,P(u)];case 3:return l=r.sent().data,(0,y.bj)(t)&&1===t.length?[3,5]:(p=(0,y.aT)(t)?M:void 0,[4,(0,y.tX)({assets:t,compSize:p,licensedContent:null===l||void 0===l||null===(d=l.meta)||void 0===d?void 0:d.licensedContent})]);case 4:r.sent(),T({assets:t,isRedownload:!1,isQuickDownload:!1,isPaid:!1,isComp:!0,pageSection:a,listId:o}),r.label=5;case 5:return[3,7];case 6:return f=r.sent(),c=f,[3,7];case 7:return _(""),c&&!L&&A(!0),[2,{error:c}]}}))}));return function(n){return e.apply(this,arguments)}}(),[L,M,P,T,S]),H=(0,a.useCallback)(function(){var e=(0,s.Z)((function(e){var n,s,i,a,c;return(0,r.__generator)(this,(function(r){return n=e.assets,s=e.assetSize,i=e.metadata,a=e.pageSection,c=e.listId,m(n),E(""),!w&&(0,o.U0)(n)?(z(!0),[2,Promise.resolve(null)]):!L&&(null===B||void 0===B?void 0:B.requireMetadataForComp)&&!i&&t?(s&&b(s),O(!0),[2,Promise.resolve(null)]):[2,G({assets:n,assetSize:s,metadata:i,pageSection:a,listId:c})]}))}));return function(n){return e.apply(this,arguments)}}(),[t,G,w,L,B,E]),K=(0,a.useMemo)((function(){return{assets:f,compLicensingHandler:H,compLicensingRequest:G,isDialogOpen:w,isDrawerOpen:L,isLicensing:x,isSnackBarOpen:j,licensingError:U,onDialogClose:function(){return z(!1)},onDrawerClose:function(){return O(!1)},onSnackbarClose:function(){return A(!1)},selectedAssetSize:S,setSelectedAssetSize:b,settingsData:B}}),[f,H,G,w,L,x,j,U,S,B]);return{assetsToLicense:f,compLicensingHandler:H,compLicensingProps:K,CompLicensingViews:k,licensingAssetId:v,licensingStatus:I}}},45206:function(e,n,t){t.d(n,{SN:function(){return _},aT:function(){return z},bj:function(){return w},qP:function(){return C},tX:function(){return h}});var s=t(47568),i=t(14924),r=t(26042),a=t(69396),o=t(70655),c=t(73915),u=t(85672),l=t(70056),d=t(19576),p=t(2490),f=t(95624),m=t(72957),g=t(71394),v=t(75957),_=function(){var e=(0,s.Z)((function(e){var n,t,s,i,r,a,c,l,d,f,g,_,h,S,b,C,w;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(n=e.assets,t=e.compSize,s=e.licensedContent,i=e.supplementalUrlType,r=s[0]||{},a=r.downloadUrl,c=r.contentId,l=r.contentFormat,d=r.contentSize,(null===(f=r.supplementalUrls)||void 0===f?void 0:f.length)&&i)return g=f.find((function(e){return e.type===i}))||{},_=g.url,[2,void 0===_?a:_];if(h=n.find((function(e){return e.id===c}))||{},S=(0,m.Tp)(h),b=(0,p.G)({assets:n,contentId:c}),C=b.filename,!b.shouldUpdateFilename)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,v.uS.post((0,u.u8)().formattedUrl,{data:[{media_id:h.id,media_type:S,comp_size:t,media_size:d,media_format:l,filename:C}]})];case 2:return w=o.sent().data,[2,((null===w||void 0===w?void 0:w.data[0])||{}).attributes.url||a];case 3:return o.sent(),[2,a];case 4:return[2,a]}}))}));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=(0,s.Z)((function(e){var n,t,s,i,r,a,u,l,d,f,m;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.assets,t=void 0===n?[]:n,s=e.compSize,i=e.assetSize,r=e.licensedContent,(a=void 0===r?[]:r).length>1?(u=(0,p.r)({assets:t,licensedContent:a}),l=(0,c.e)({urlParams:{filename:u.bundleFilename}}).formattedUrl,[4,v.jl.post(l,u.content)]):[3,2];case 1:return d=o.sent().data,f=d.public_url,[2,(0,g.A_)(f)];case 2:return[4,_({assets:t,compSize:s,assetSize:i,licensedContent:a})];case 3:return m=o.sent(),[2,(0,g.A_)(m)]}}))}));return function(n){return e.apply(this,arguments)}}(),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){var n=(0,f.Fy)({asset:e});return(0,a.Z)((0,r.Z)({},e),{assetType:n,licenseId:d._r[n]})}))},b=function(){var e=(0,s.Z)((function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:e=(0,u.d0)().url,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,v.uS.get(e).then((function(e){return null===e||void 0===e?void 0:e.data}))];case 2:return[2,n.sent().reduce((function(e,n){return(0,a.Z)((0,r.Z)({},e),(0,i.Z)({},n.name,"-"))}),{})];case 3:return n.sent(),[2,{}];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,s.Z)((function(){var e,n,t,s,i,r,a=arguments;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},n=e.assets,t=e.assetSize,s=e.metadata,i=e.selectedAssetSize,(r=s)?[3,2]:[4,b()];case 1:r=o.sent(),o.label=2;case 2:return[2,{assets:S(n),licenseMetadata:r,licensingType:d.td,selectedAssetSize:t||i||"",isVideoComp:!0}]}}))}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,f.qw)({asset:e[0]||{}})===l.j0},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[l.pV,l.k4,l.ox].includes((0,f.qw)({asset:e[0]||{}}))}},2490:function(e,n,t){t.d(n,{G:function(){return o},r:function(){return c}});var s=t(72957),i=t(29489),r="shutterstock",a="shutterstock_editorial",o=function(e){var n=e.assets,t=e.contentId,i=n.find((function(e){return e.id===t}))||{},o=function(e){var n=e.asset;return(0,s.PD)(n)?{prefix:"shutterstock_offset",shouldUpdateFilename:!0}:(0,s.tS)({asset:n})?{prefix:a,shouldUpdateFilename:!1}:{prefix:r,shouldUpdateFilename:!1}}({asset:i}),c=o.prefix,u=o.shouldUpdateFilename;return{filename:"".concat(c,"_").concat(t),shouldUpdateFilename:u}},c=function(e){var n=e.assets,t=void 0===n?[]:n,c=e.licensedContent,u=void 0===c?[]:c,l=t.every((function(e){return(0,s.tS)({asset:e})})),d=u.map((function(e){var n=e.contentId,s=e.downloadUrl,i=e.contentFormat,r=o({assets:t,contentId:n}).filename,a=s.split("/").pop().split(".").pop();return(a.length>4||a.length<2)&&(a=i),{filename:"".concat(r,".").concat(a),url:s}})),p=(0,i.zs)();return{bundleFilename:"".concat(l?a:r,"_").concat(p,".zip"),content:d}}},64319:function(e,n,t){t.d(n,{H:function(){return i}});var s=t(44419),i=function(e){var n,t=e.user;return null===t||void 0===t||null===(n=t.roles)||void 0===n?void 0:n.includes(s.qy)}},44512:function(e,n,t){t.d(n,{h:function(){return r}});var s=t(64319),i=t(19805),r=function(e){var n=(0,i.j)().data;return(0,s.H)({user:n})?null===e||void 0===e?void 0:e.compSizeImage:null===e||void 0===e?void 0:e.compSizeSubImage}}}]);
//# sourceMappingURL=1005-2df0bdbeb90b4ec1.js.map