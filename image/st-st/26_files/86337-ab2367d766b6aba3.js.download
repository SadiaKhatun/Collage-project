"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[86337],{86337:function(e,t,i){i.d(t,{VL:function(){return H}});var n=i(10253),o=i(85893),s=i(5152),r=i.n(s),a=i(67294),c=i(40069),l=i(55840),d=i(72957),u=i(87266),p=i(25784),f=i(9439),g=i(47568),v=i(14924),m=i(26042),C=i(70655),T=i(40821),S=i(85672),I=i(331),y=i(70056),h=i(29336),A=i(86109),w=i(98462),b=i(49071),P=i(39224),_=i(56527),Z=i(80930),k=i(48497),O=i(33340),D=i(75957),M=i(14587),x=i(24773),U=function(e){var t=e.queryParams;return(0,S.nS)({queryParams:t}).formattedUrl},E=function(){var e=(0,g.Z)((function(e){var t,i,n,o,s,r,a,c,l,u,p,f,g;return(0,C.__generator)(this,(function(v){switch(v.label){case 0:return t=e.isRexEditorial,i=e.collectionId,n=e.verificationCode,o=e.setAsCover,s=e.firstAsset,r=e.collectionType,(c=(0,d.A8)(s))!==y.VT?[2]:(l={id:i,verificationCode:n,collectionType:r},u=(0,S.Yz)({queryParams:l}).formattedUrl,[4,D.uS.get(u).then((function(e){return(0,M.O)(e.data)||{}}))]);case 1:return(null===(p=v.sent())||void 0===p||null===(a=p.coverItem)||void 0===a?void 0:a.id)?[3,3]:(f=(0,d.OP)({asset:s,isRexEditorial:t}),g=(0,b.Q)({collectionId:i,mappedAssetType:c,assetId:f}),[4,o({collection:{id:i},mediaItem:{id:g}})]);case 2:v.sent(),v.label=3;case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=(0,n.Z)((0,a.useState)({status:"",error:void 0}),2),t=e[0],i=e[1],o=(0,n.Z)((0,a.useState)(""),2),s=o[0],r=o[1],c=(0,n.Z)((0,a.useState)(""),2),l=c[0],u=c[1],p=(0,Z.J)(),f=(0,x.w)().setAsCover,M=(0,k.D)().isBrandSstk,R=(0,O.yh)().analytics,J=(0,w.UM)(R),N=(0,a.useCallback)(function(){var e=(0,g.Z)((function(e){var t,n,o,s,a,c,l,g,w,Z,k,O,x,R,N,B,j,V,q,G,L,H,z,Q,Y,F;return(0,C.__generator)(this,(function(C){switch(C.label){case 0:t=e.assets,n=e.assetType,o=e.gridItems,s=e.groupedOptions,a=e.id,c=e.title,l=e.verificationCode,g=e.pageSection,w=e.listId,Z=(0,P.wZ)({assetType:n,isBrandSstk:M}),C.label=1;case 1:return C.trys.push([1,6,7,9]),i({status:I.MR,error:void 0}),k=(0,d.Xo)(n),O=a,x=l,s&&s.length&&(R=s.find((function(e){return e.title===c})),R&&(O=R.id,x=R.verificationCode)),O?[3,3]:(N=(0,S.A6)().formattedUrl,B={data:{attributes:{title:c,collectionType:Z,isPublic:!1},type:h.Ul}},[4,D.uS.post(N,B)]);case 2:j=C.sent(),V=j.data,q=V.id,G=V.attributes,L=G.verificationCode,O=q,x=L,C.label=3;case 3:return H={data:t.map((function(e){var t=(0,d.OP)({asset:e,isRexEditorial:k}),i=(0,d.A8)(e);return(0,m.Z)({type:h.A8,id:(0,b.Q)({collectionId:O,mappedAssetType:i,assetId:t})},i===y.VT&&function(e){var t=e.assetId,i=e.asset,n=i.id,o=i.tier,s=void 0===o?10:o,r=i.src,a=i.aspect,c=i.width,l=i.height;return{metadata:{notes:{media_id:t,alpha_num_id:n,rex_id:n,media_type:y.gP,tier:s,media:{aspect:a,width:c,height:l,url:r}}}}}({assetId:t,asset:e}))}))},z=(0,S.mp)({urlParams:{id:O},queryParams:{isRexEditorial:k}}).formattedUrl,Q=(0,_.y)(J),[4,D.uS.post(z,H,Q?{headers:(0,v.Z)({},A.as,Q)}:void 0)];case 4:return C.sent(),Y=t[0],[4,E({isRexEditorial:k,collectionId:O,verificationCode:x,setAsCover:f,firstAsset:Y,collectionType:Z})];case 5:return C.sent(),p({collectionId:O,collectionName:c,gridItems:o,assets:t,pageSection:g,listId:w}),r(O),u(x),[3,9];case 6:return F=C.sent(),i({status:I.cM,error:F}),[3,9];case 7:return[4,(0,T.JG)(U({queryParams:{"filter[type]":Z}}))];case 8:return C.sent(),[7];case 9:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[p,f,J,M]);return{add:N,collectionId:s,setStatus:i,status:t,verificationCode:l}},J=i(19805),N=i(66978),B=i(99534),j=r()((function(){return Promise.all([i.e(39293),i.e(85694),i.e(41664),i.e(15949),i.e(58499),i.e(30077),i.e(44727),i.e(18055),i.e(51773)]).then(i.bind(i,11703)).then((function(e){return e.CollectionModal}))}),{loadableGenerated:{webpack:function(){return[11703]}},ssr:!1}),V=function(e){var t=e.isOpen,i=(0,B.Z)(e,["isOpen"]);return(0,f.B)(t)&&(0,o.jsx)(j,(0,m.Z)({isOpen:t},i))},q=r()((function(){return i.e(73978).then(i.bind(i,73978)).then((function(e){return e.LazyAddToCollectionModal}))}),{loadableGenerated:{webpack:function(){return[73978]}},ssr:!1}),G=r()((function(){return i.e(49303).then(i.bind(i,49303)).then((function(e){return e.Snackbar}))}),{loadableGenerated:{webpack:function(){return[49303]}},ssr:!1}),L=function(e){var t=e.assets,i=e.assetType,n=e.collectionId,s=e.collectionTitle,r=e.gridItems,l=e.isDialogActive,d=e.isSnackBarOpen,u=e.onAddToCollections,p=e.onAlertSnackbarClose,g=e.onAddToCollectionsComplete,v=e.redirectToCDPAction,m=e.setIsDialogActive,C=e.showCopyToModalTitle,T=e.status,S=e.verificationCode,I=e.pageSection,y=(0,N.p)(c.vb),h=(0,N.p)(c.pG),A=(0,f.B)(t),w=(0,a.useCallback)((function(){return m(!1)}),[m]);return A?y||h?(0,o.jsx)(q,{onClose:w,isOpen:l,items:t,onAddToCollectionsComplete:g,pageSection:I}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(V,{assets:t,assetType:i,collectionId:n,gridItems:r,isOpen:l,onAddToCollections:u,setIsDialogActive:m,showCopyToModalTitle:C,pageSection:I}),(0,o.jsx)(G,{assetType:i,collectionId:n,collectionTitle:s,isOpen:d,onAlertSnackbarClose:p,redirectToCDPAction:v,status:T,verificationCode:S})]}):null};L.defaultProps={assetType:"",assets:null,gridItems:null,onAddToCollectionsComplete:void 0,redirectToCDPAction:{}};var H=function(e){var t=e.initialAssetType,i=(0,n.Z)((0,a.useState)(!1),2),o=i[0],s=i[1],r=(0,n.Z)((0,a.useState)(!1),2),c=r[0],f=r[1],g=(0,n.Z)((0,a.useState)(!1),2),v=g[0],m=g[1],C=(0,n.Z)((0,a.useState)(""),2),T=C[0],S=C[1],I=(0,n.Z)((0,a.useState)(null),2),y=I[0],h=I[1],A=(0,n.Z)((0,a.useState)(t),2),w=A[0],b=A[1],P=(0,n.Z)((0,a.useState)(null),2),_=P[0],Z=P[1],k=(0,n.Z)((0,a.useState)(null),2),O=k[0],D=k[1],M=(0,n.Z)((0,a.useState)(null),2),x=M[0],U=M[1],E=(0,J.B)(),N=(0,u.cM)(),B=(0,p.L)(),j=(0,n.Z)((0,a.useState)({shouldHandleRedirect:!1,redirectToCollectionDetailsPage:B}),2),V=j[0],q=j[1],G=R(),H=G.add,z=G.status,Q=G.collectionId,Y=G.verificationCode;(0,a.useEffect)((function(){return function(){return h(null)}}),[]),(0,a.useEffect)((function(){return function(){return b("")}}),[]);var F=(0,a.useCallback)((function(e){var t=e.formattedAssets,i=e.gridItems,n=e.isCopyToCollection,o=e.mappedAssetType,r=e.redirectToCollectionDetailsPage,a=e.pageSection,c=e.listId;b(o),h(t),D(a),U(c),n&&m(!0),i&&Z(i),r&&q({shouldHandleRedirect:!0,redirectToCollectionDetailsPage:r}),s(!0)}),[]);(0,a.useEffect)((function(){(0,l.DZ)({showAddToCollectionModal:F,isLoggedInUser:E})}),[E,F]);var W=(0,a.useMemo)((function(){return{assets:y,pageSection:O,assetType:w,collectionId:Q,collectionTitle:T,gridItems:_,isDialogActive:o,isSnackBarOpen:c,onAddToCollections:function(e){var t=e.id,i=e.title,n=e.verificationCode,o=e.groupedOptions,r=e.pageSection;return S(i),s(!1),f(!0),H({assetType:w,assets:y,gridItems:_,groupedOptions:o,id:t,title:i,verificationCode:n,pageSection:r||O,listId:x})},onAlertSnackbarClose:function(){return f(!1)},redirectToCDPAction:V,setIsDialogActive:s,showCopyToModalTitle:v,status:z,verificationCode:Y}}),[y,_,H,x,O,w,Q,T,o,c,V,v,z,Y]),X=(0,a.useCallback)((function(e){var t=e.assets,i=e.gridItems,n=e.isCopyToCollection,o=void 0!==n&&n,s=e.redirectToCollectionDetailsPage,r=e.pageSection,a=e.listId;if(E){var c=function(e){return[].concat(e)}(t);F({formattedAssets:c,gridItems:i,isCopyToCollection:o,mappedAssetType:(0,d.A8)(c[0]),redirectToCollectionDetailsPage:s,pageSection:r,listId:a})}else(0,l.JO)({assets:t,gridItems:i,signUpPath:N})}),[E,F,N]);return{addToCollectionViewsProps:W,addToCollectionViewsHandler:X,AddToCollectionViews:L}}},55840:function(e,t,i){i.d(t,{DZ:function(){return a},JO:function(){return r}});var n=i(72957),o="add_to_collection_asset",s="add_to_collection_grid_items",r=function(e){var t=e.assets,i=e.gridItems,n=e.signUpPath;window&&(t&&window.sessionStorage.setItem(o,JSON.stringify(t)),i&&window.sessionStorage.setItem(s,JSON.stringify(i)),window.location=n)},a=function(e){var t=e.showAddToCollectionModal,i=e.isLoggedInUser;if(void 0!==i){if(i){var r=window.sessionStorage.getItem(o),a=window.sessionStorage.getItem(s),c=function(e){return e&&"undefined"!==e};if(c(r)&&c(a)){var l=JSON.parse(r),d=JSON.parse(a),u=[].concat(l);t({formattedAssets:u,gridItems:d,mappedAssetType:(0,n.A8)(u[0]),isCopyToCollection:!1,redirectToCollectionDetailsPage:!1})}}window.sessionStorage.removeItem(o),window.sessionStorage.removeItem(s)}}},56527:function(e,t,i){i.d(t,{y:function(){return n}});var n=function(e){return[e.subPage,e.pageType].join("-")}},80930:function(e,t,i){i.d(t,{J:function(){return a}});var n=i(67294),o=i(98462),s=i(33340),r=i(84977),a=function(){var e=(0,s.yh)().analytics,t=(0,r.Y)().getSearchContext;return(0,n.useCallback)((function(i){var n=i.collectionId,s=i.collectionName,r=i.gridItems,a=i.assets,c=i.pageSection,l=i.listId;e.productAddedToWishlist({products:a.map((function(e){return(0,o.bR)({asset:e,getSearchContext:t,gridItems:r,pageSection:c})})),wishlist_id:n,wishlist_name:s,list_id:null!==l&&void 0!==l?l:""})}),[e,t])}},24773:function(e,t,i){i.d(t,{w:function(){return u}});var n=i(47568),o=i(10253),s=i(70655),r=i(67294),a=i(85672),c=i(331),l=i(29336),d=i(75957),u=function(){var e=(0,o.Z)((0,r.useState)({status:"",error:void 0}),2),t=e[0],i=e[1],u=(0,r.useCallback)(function(){var e=(0,n.Z)((function(e){var t,n,o,r,u;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:t=e.collection,n=e.mediaItem,o=(0,a.df)({urlParams:{id:t.id}}).formattedUrl,r={data:{id:t.id,relationships:{"cover-item":{data:{id:"".concat(n.id),type:l.A8}}},type:l.Ul}},s.label=1;case 1:return s.trys.push([1,3,,4]),i({status:c.MR,error:void 0}),[4,d.uS.patch(o,r)];case 2:return s.sent(),[3,4];case 3:return u=s.sent(),i({status:c.cM,error:u}),[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[]);return{status:t,setStatus:i,setAsCover:u}}}}]);
//# sourceMappingURL=86337-ab2367d766b6aba3.js.map