"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[88886],{73915:function(e,t,n){n.d(t,{e:function(){return i}});var r=n(26042),s=n(11987),i=function(e){var t=e.urlParams,n=void 0===t?{}:t,i=e.queryParams,a=void 0===i?{}:i,o="/bundle/".concat(n.filename),c=(0,r.Z)({},a);return{url:o,defaultParams:c,formattedUrl:(0,s.format)({pathname:o,query:c})}}},71578:function(e,t,n){n.d(t,{Oo:function(){return k},rB:function(){return g}});var r=n(47568),s=n(26042),i=n(70655),a=n(23204),o=n.n(a),c=n(85672),u=n(82475),l=n(24899),d=n(70056),f=n(42149),v=n(48588),m=n(19576),p=n(75957),_=n(14587),h=n(28741),y=n(72957),w=n(27725),b=n(95624),g=function(e){var t,n,r=e.asset;return(null===r||void 0===r||null===(t=r.metadata)||void 0===t||null===(n=t.cart)||void 0===n?void 0:n.sizes)||r.sizes},z=function(){var e=(0,r.Z)((function(e){var t,n,r,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return!(null===(t=e.asset)||void 0===t||null===(n=t.metadata)||void 0===n?void 0:n.cart)||t.metadata.cart.sizes?[3,2]:(r=(0,y.so)(t),s={id:t.id},r&&(s.channel=f.$S,s.content_provider=v._e),[4,p.uS.get((0,c.om)({queryParams:s}).formattedUrl).then((function(e){var t=e.data;return(0,_.O)(t)}))]);case 1:return[2,i.sent().sizes];case 2:return[2,g({asset:t})]}}))}));return function(t){return e.apply(this,arguments)}}(),A=function(e){var t,n,r,s,i=e.selectedAssetSize,a=e.asset,c=g({asset:a}),d=(0,y.EK)(a);if(!c&&(null===a||void 0===a||null===(t=a.metadata)||void 0===t||null===(n=t.cart)||void 0===n?void 0:n.size)&&a.metadata.cart.format)return{content_size:d?l.vD:a.metadata.cart.size,content_format:a.metadata.cart.format};var f,v=Object.values(c);return f=a.licenseAsJpeg||(null===(r=a.metadata)||void 0===r||null===(s=r.cart)||void 0===s?void 0:s.licenseAsJpeg)?v.find((function(e){return e.format===u._3})):w.Bg[i]?(0,h.AR)({sizes:v,compSizeImage:i}):(0,h.Nf)(v),{content_size:d?l.vD:w.nd[o()(f.name)].downloadName,content_format:f.format}},S=function(e){var t=e.map[e.licenseName];return t===l.T0?l.qY:t},N=function(){var e=(0,r.Z)((function(e){var t,n,r,s,a,o,c,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.asset,n=e.licenseName,r=e.isVideoComp,s=e.selectedAssetSize,[4,z({asset:t})];case 1:return a=i.sent(),o=function(e){var t=e.asset,n=e.licenseName,r=e.isVideoComp,s=e.selectedAssetSize,i=e.sizes,a=(0,y.EK)(t),o=(0,y.cL)(t),c=(0,y.$Q)({sizes:Object.values(i)});return!r&&c?S({map:w.Q1,licenseName:n}):r||n===m.f1||a||o?!s||a||o?(0,h.mF)(i):w.kR[s]:S({map:w.kR,licenseName:n})}({asset:t,licenseName:n,isVideoComp:r,selectedAssetSize:s,sizes:a}),c=(0,y.EK)(t),u=Object.values(a).find((function(e){var t=e.resolution;return w.wb[null===t||void 0===t?void 0:t.toLowerCase()]===o})),[2,{content_size:c?l.vD:o,content_format:null===u||void 0===u?void 0:u.format}]}}))}));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t;switch(e.selectedAssetSize){case"stereo":t=l.cs;break;case"5.1":t=l.gp;break;default:t=l.yy}return{content_size:t,content_format:u._Y}},Z=function(){var e=(0,r.Z)((function(e){var t,n,r,s,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:switch(t=e.asset,n=e.licenseName,r=e.isVideoComp,s=e.selectedAssetSize,a=(0,b.qw)({asset:t}),(0,y.so)(t)&&(a=d.A7),a){case d.pX:case d.A7:return[3,1];case d.j0:return[3,3];case d.tn:return[3,4]}return[3,5];case 1:return[4,N({asset:t,licenseName:n,isVideoComp:r,selectedAssetSize:s})];case 2:return[2,i.sent()];case 3:return[2,{content_size:l.Ng,content_format:d.j0}];case 4:return[2,C({selectedAssetSize:s})];case 5:return[2,A({selectedAssetSize:s,asset:t})];case 6:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,r.Z)((function(e){var t,n,r,a,o,c,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.licenseName,n=e.selectedAssetSize,r=e.asset,a=e.isVideoComp,o=(0,b.qw)({asset:r}),c=r.id.toString(),u=[{content_id:c,content_type:(0,b.JD)({assetType:o,assetId:c})}],[4,Z({asset:r,licenseName:t,isVideoComp:a,selectedAssetSize:n})];case 1:return[2,s.Z.apply(void 0,u.concat([i.sent()]))]}}))}));return function(t){return e.apply(this,arguments)}}()},88886:function(e,t,n){n.d(t,{P:function(){return o}});var r=n(67294),s=n(26430),i=n(71394),a=n(87266),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.asset,n=e.query,o=e.shouldSetLocalStorage,c=void 0!==o&&o,u=(0,a.cM)(n);return(0,r.useCallback)((function(){s.j&&(c&&(0,i.oe)(t),window.location.href=u)}),[u,t,c])}},71394:function(e,t,n){n.d(t,{A_:function(){return y},QH:function(){return g},VM:function(){return A},Zc:function(){return N},mJ:function(){return b},oe:function(){return S},uG:function(){return w}});var r=n(47568),s=n(26042),i=n(69396),a=n(36305),o=n(70655),c=n(73915),u=n(85672),l=n(70056),d=n(19576),f=n(71578),v=n(28741),m=n(72957),p=n(35772),_=n(75957),h=n(58940),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,r=t.target,s=void 0===r?"_self":r,i=document.createElement("a");i.setAttribute("data-automation","FeatureDownload_utils_link"),i.style.display="none",i.href=e,i.target=s,i.download=n||e,document.body.appendChild(i),i.click(),(0,h.bK)()||document.body.removeChild(i)},w=function(){var e=(0,r.Z)((function(e){var t,n,r,s;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return t=e.downloadBundlePayload,n=(0,c.e)({urlParams:{filename:t.bundleFilename}}).formattedUrl,[4,_.jl.post(n,t.content)];case 1:return r=i.sent(),s=r.data,[2,s.public_url]}}))}));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t=e.licensedContent,n=e.supplementalUrlType,r=t[0],s=r.downloadUrl,i=r.supplementalUrls;if((null===i||void 0===i?void 0:i.length)&&n){var a=i.find((function(e){return e.type===n}))||{},o=a.url;return void 0===o?s:o}return s},g=function(){var e=(0,r.Z)((function(e){var t,n,r,s,i,a,c;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.downloadPayload,n=e.supplementalUrlType,r=e.licenseeIdentifier,s=(0,u.f$)({urlParams:{licenseeIdentifier:r}}).formattedUrl,[4,_.uS.post(s,t)];case 1:return i=o.sent(),a=i.data,c=a.meta.licensedContent,[2,{downloadUrl:b({licensedContent:c,supplementalUrlType:n}),licensedContent:c}]}}))}));return function(t){return e.apply(this,arguments)}}(),z=function(e){var t=e.existingAssetLicenses,n=e.contentType,r=e.licenseName,s=e.subscriptions;switch(n){case l.pX:var i,o,c=(0,p.I)({existingAssetLicenses:t,subscriptions:(0,a.Z)(null!==(i=null===s||void 0===s?void 0:s.videoSubscriptions)&&void 0!==i?i:[]).concat((0,a.Z)(null!==(o=null===s||void 0===s?void 0:s.videoCompSubscriptions)&&void 0!==o?o:[])),licenseName:r});return(null===c||void 0===c?void 0:c.redeemableFor)||r;case l.j0:return r||d.Tg;case l.tn:return r||d.P1;case l.pV:default:return r}},A=function(){var e=(0,r.Z)((function(e){var t,n,a,c,u;return(0,o.__generator)(this,(function(l){switch(l.label){case 0:return t=e.assets,n=e.existingAssetLicenses,a=e.selectedAssetSize,c=e.subscriptions,u=t.map(function(){var e=(0,r.Z)((function(e){var t,r;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=(0,v.SS)({asset:e}),r=[{}],[4,(0,f.Oo)({asset:e,licenseName:e.licenseId,selectedAssetSize:a})];case 1:return[2,i.Z.apply(void 0,[s.Z.apply(void 0,r.concat([o.sent()])),{license_name:z({existingAssetLicenses:n,contentType:t,licenseName:e.licenseId,subscriptions:c}),show_modal:!0}])]}}))}));return function(t){return e.apply(this,arguments)}}()),[4,Promise.all(u)];case 1:return[2,{required_cookies:"",content:l.sent()}]}}))}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&e.id&&(e.title||e.description)&&e.type&&window.localStorage.setItem("sstk_ent_asset_preview",JSON.stringify({id:e.id,title:e.title||e.description,thumb:e.src||e.previewImageUrl||"",video:e.previewVideoUrls,url:e.link,type:(0,m.Tp)(e),isRex:e.isRexEditorial}))},N=function(e){return requestAnimationFrame?function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];t&&cancelAnimationFrame(t),t=requestAnimationFrame((function(){e.apply(void 0,(0,a.Z)(r))}))}:e;var t}}}]);
//# sourceMappingURL=88886-c191d856227434d7.js.map